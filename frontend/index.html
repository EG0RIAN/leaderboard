<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>–õ–∏–¥–µ—Ä–±–æ—Ä–¥ –¥–æ–Ω–∞—Ç–æ–≤</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@telegram-apps/sdk@2.0.0/dist/css/style.css">
    <link rel="stylesheet" href="styles.css">
    <script src="translations.js"></script>
    <script>
        // Set API URL - production server
        window.API_URL = 'https://v3022889.hosted-by-vdsina.ru';
        // Set language on page load
        setLanguage();
    </script>
</head>
<body>
    <!-- Onboarding Stories -->
    <div id="onboarding" class="onboarding-overlay">
        <div class="stories-container">
            <!-- Progress bar -->
            <div class="stories-progress">
                <div class="progress-segment" data-story="0"><div class="progress-fill"></div></div>
                <div class="progress-segment" data-story="1"><div class="progress-fill"></div></div>
                <div class="progress-segment" data-story="2"><div class="progress-fill"></div></div>
                <div class="progress-segment" data-story="3"><div class="progress-fill"></div></div>
            </div>
            
            <!-- Stories content -->
            <div class="stories-slides">
                <!-- Story 1: Welcome -->
                <div class="story-slide active" data-story="0">
                    <div class="story-content">
                        <div class="story-emoji">üèÜ</div>
                        <h1 data-i18n="onboardingTitle1">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h1>
                        <p data-i18n="onboardingText1">–≠—Ç–æ –ª–∏–¥–µ—Ä–±–æ—Ä–¥ –¥–æ–Ω–∞—Ç–æ–≤. –°–æ—Ä–µ–≤–Ω—É–π—Ç–µ—Å—å —Å –¥—Ä—É–∑—å—è–º–∏ –∏ –ø–æ–¥–Ω–∏–º–∞–π—Ç–µ—Å—å –≤ —Ç–æ–ø!</p>
                    </div>
                </div>
                
                <!-- Story 2: Donate -->
                <div class="story-slide" data-story="1">
                    <div class="story-content">
                        <div class="story-emoji">‚≠ê</div>
                        <h1 data-i18n="onboardingTitle2">–ü–æ–ø–æ–ª–Ω—è–π—Ç–µ –±–∞–ª–∞–Ω—Å</h1>
                        <p data-i18n="onboardingText2">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Telegram Stars –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è. –ß–µ–º –±–æ–ª—å—à–µ –¥–æ–Ω–∞—Ç ‚Äî —Ç–µ–º –≤—ã—à–µ –ø–æ–∑–∏—Ü–∏—è!</p>
                    </div>
                </div>
                
                <!-- Story 3: Referrals -->
                <div class="story-slide" data-story="2">
                    <div class="story-content">
                        <div class="story-emoji">üë•</div>
                        <h1 data-i18n="onboardingTitle3">–ü—Ä–∏–≥–ª–∞—à–∞–π—Ç–µ –¥—Ä—É–∑–µ–π</h1>
                        <p data-i18n="onboardingText3">–ü—Ä–∏–≤–æ–¥–∏—Ç–µ –¥—Ä—É–∑–µ–π –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –±–æ–Ω—É—Å—ã –æ—Ç –∏—Ö –¥–æ–Ω–∞—Ç–æ–≤. –¢–æ–ø —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ –∂–¥—ë—Ç –≤–∞—Å!</p>
                    </div>
                </div>
                
                <!-- Story 4: Profile -->
                <div class="story-slide" data-story="3">
                    <div class="story-content">
                        <div class="story-emoji">‚ú®</div>
                        <h1 data-i18n="onboardingTitle4">–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ</h1>
                        <p data-i18n="onboardingText4">–î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–π —Ç–µ–∫—Å—Ç –∏–ª–∏ —Å—Å—ã–ª–∫—É –≤ –ø—Ä–æ—Ñ–∏–ª–µ ‚Äî –æ–Ω –±—É–¥–µ—Ç –≤–∏–¥–µ–Ω –≤—Å–µ–º –≤ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–µ!</p>
                    </div>
                </div>
            </div>
            
            <!-- Navigation zones -->
            <div class="story-nav story-nav-prev"></div>
            <div class="story-nav story-nav-next"></div>
            
            <!-- Skip button -->
            <button class="stories-skip" id="skip-onboarding" data-i18n="onboardingSkip">–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</button>
            
            <!-- Start button (on last slide) -->
            <button class="stories-start" id="start-app" data-i18n="onboardingStart">–ù–∞—á–∞—Ç—å</button>
        </div>
    </div>

    <div id="app">
        <div class="container">
            <!-- Header with tabs and profile button -->
            <div class="header-row">
                <div class="tabs">
                    <button class="tab active" data-tab="all-time" data-i18n="tabAllTime">–ó–∞ –≤—Å—ë –≤—Ä–µ–º—è</button>
                    <button class="tab" data-tab="week" data-i18n="tabWeek">–ó–∞ –Ω–µ–¥–µ–ª—é</button>
                    <button class="tab" data-tab="referrals" data-i18n="tabReferrals">–¢–æ–ø —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤</button>
                </div>
                <button class="profile-btn" id="open-profile" title="–ü—Ä–æ—Ñ–∏–ª—å">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="8" r="4"/>
                        <path d="M4 20c0-4 4-6 8-6s8 2 8 6"/>
                    </svg>
                </button>
            </div>

            <!-- Tab content -->
            <div class="tab-content">
                <!-- All-time leaderboard -->
                <div class="tab-pane active" id="all-time">
                    <div class="leaderboard-header">
                        <h2 data-i18n="leaderboardAllTime">–õ–∏–¥–µ—Ä–±–æ—Ä–¥ –∑–∞ –≤—Å—ë –≤—Ä–µ–º—è</h2>
                    </div>
                    <div id="all-time-list" class="leaderboard-list">
                        <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                    </div>
                </div>

                <!-- Week leaderboard -->
                <div class="tab-pane" id="week">
                    <div class="leaderboard-header">
                        <h2 data-i18n="leaderboardWeek">–õ–∏–¥–µ—Ä–±–æ—Ä–¥ –∑–∞ –Ω–µ–¥–µ–ª—é</h2>
                    </div>
                    <div id="week-list" class="leaderboard-list">
                        <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                    </div>
                </div>

                <!-- Referrals leaderboard -->
                <div class="tab-pane" id="referrals">
                    <div class="leaderboard-header">
                        <h2 data-i18n="leaderboardReferrals">–¢–æ–ø —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤</h2>
                        <button class="btn-share" id="share-ref-btn" data-i18n="inviteFriend">–ü—Ä–∏–≤–µ–¥–∏ –¥—Ä—É–≥–∞</button>
                    </div>
                    <div id="referrals-list" class="leaderboard-list">
                        <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                    </div>
                </div>
                
            </div>

            <!-- My position block -->
            <div id="my-position" class="my-position" style="display: none;">
                <div class="my-position-content">
                    <span data-i18n="you">–í—ã</span>: #<span id="my-rank">-</span>
                </div>
            </div>

            <!-- Fixed bottom button -->
            <div class="bottom-button">
                <button class="btn-primary" id="donate-btn" data-i18n="donate">–ü–æ–ø–æ–ª–Ω–∏—Ç—å</button>
            </div>
        </div>

        <!-- Donate modal -->
        <div id="donate-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 data-i18n="donateTitle">–ü–æ–ø–æ–ª–Ω–∏—Ç—å –¥–æ–Ω–∞—Ç</h3>
                    <button class="modal-close" id="close-modal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="presets">
                        <button class="preset-btn" data-preset="1" data-amount="">
                            <span class="preset-label" data-i18n="preset1">1 –º–µ—Å—Ç–æ</span>
                            <span class="preset-amount"></span>
                        </button>
                        <button class="preset-btn" data-preset="2" data-amount="">
                            <span class="preset-label" data-i18n="preset2">2 –º–µ—Å—Ç–æ</span>
                            <span class="preset-amount"></span>
                        </button>
                        <button class="preset-btn" data-preset="3" data-amount="">
                            <span class="preset-label" data-i18n="preset3">3 –º–µ—Å—Ç–æ</span>
                            <span class="preset-amount"></span>
                        </button>
                    </div>
                    <div class="custom-amount">
                        <label data-i18n="customAmount">–°–≤–æ—è —Å—É–º–º–∞ (Stars):</label>
                        <input type="number" id="custom-stars" min="1" data-i18n-placeholder="enterAmount" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É">
                    </div>
                    
                    <!-- Payment method: Only Telegram Stars (crypto requires provider setup) -->
                    
                    <button class="btn-primary" id="create-invoice-btn" disabled data-i18n="createPayment">–°–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç–µ–∂</button>
                </div>
            </div>
        </div>

        <!-- User profile modal (for viewing other users) -->
        <div id="user-profile-modal" class="user-profile-modal">
            <div class="user-profile-content">
                <button class="user-profile-close" id="close-user-profile">&times;</button>
                <div class="user-profile-header">
                    <div class="user-profile-avatar" id="user-profile-avatar">
                        <span>U</span>
                    </div>
                    <div class="user-profile-name" id="user-profile-name">User</div>
                    <div class="user-profile-username" id="user-profile-username">@username</div>
                </div>
                <div class="user-profile-stats">
                    <div class="user-profile-stat">
                        <span class="stat-value" id="user-profile-tons">0</span>
                        <span class="stat-label">üíé</span>
                    </div>
                    <div class="user-profile-stat">
                        <span class="stat-value" id="user-profile-rank">#1</span>
                        <span class="stat-label" data-i18n="position">–º–µ—Å—Ç–æ</span>
                    </div>
                </div>
                <div class="user-profile-custom-text" id="user-profile-custom-text"></div>
            </div>
        </div>
        <div id="user-profile-backdrop" class="user-profile-backdrop"></div>

        <!-- Profile slide-out panel -->
        <div id="profile-panel" class="profile-panel">
            <div class="profile-panel-header">
                <h3 data-i18n="profileTitle">–ü—Ä–æ—Ñ–∏–ª—å</h3>
                <button class="profile-panel-close" id="close-profile">&times;</button>
            </div>
            <div class="profile-panel-content">
                <!-- User info -->
                <div class="profile-user-info">
                    <div class="profile-avatar" id="profile-avatar">
                        <span>U</span>
                    </div>
                    <div class="profile-name" id="profile-name">User</div>
                    <div class="profile-stats">
                        <div class="profile-stat">
                            <span class="stat-value" id="profile-tons">0</span>
                            <span class="stat-label">üíé</span>
                        </div>
                        <div class="profile-stat">
                            <span class="stat-value" id="profile-refs">0</span>
                            <span class="stat-label" data-i18n="referralsCount">—Ä–µ—Ñ.</span>
                        </div>
                    </div>
                </div>
                
                <!-- Custom text form -->
                <div class="profile-form">
                    <div class="form-group">
                        <label for="custom-text" data-i18n="customTextLabel">–í–∞—à —Ç–µ–∫—Å—Ç –≤ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–µ:</label>
                        <input type="text" id="custom-text" maxlength="100" 
                               data-i18n-placeholder="customTextPlaceholder" 
                               placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç (–º–∞–∫—Å. 100 —Å–∏–º–≤–æ–ª–æ–≤)">
                        <span class="char-counter"><span id="char-count">0</span>/100</span>
                    </div>
                    
                    <button class="btn-primary" id="save-custom-text" data-i18n="saveText">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    
                    <div class="profile-info">
                        <p data-i18n="customTextInfo">–≠—Ç–æ—Ç —Ç–µ–∫—Å—Ç –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è —Ä—è–¥–æ–º —Å –≤–∞—à–∏–º –∏–º–µ–Ω–µ–º –≤ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–µ.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Profile panel backdrop -->
        <div id="profile-backdrop" class="profile-backdrop"></div>
    </div>

    <script src="onboarding.js"></script>
    <script src="app.js"></script>
</body>
</html>

