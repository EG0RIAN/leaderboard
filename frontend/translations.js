// Translations for the app
const translations = {
    ru: {
        // Tabs
        tabAllTime: "Ð—Ð° Ð²ÑÑ‘ Ð²Ñ€ÐµÐ¼Ñ",
        tabWeek: "Ð—Ð° Ð½ÐµÐ´ÐµÐ»ÑŽ",
        tabReferrals: "Ð¢Ð¾Ð¿ Ñ€ÐµÑ„ÐµÑ€Ð°Ð»Ð¾Ð²",
        tabProfile: "ÐŸÑ€Ð¾Ñ„Ð¸Ð»ÑŒ",
        
        // Leaderboards
        leaderboardAllTime: "Ð›Ð¸Ð´ÐµÑ€Ð±Ð¾Ñ€Ð´ Ð·Ð° Ð²ÑÑ‘ Ð²Ñ€ÐµÐ¼Ñ",
        leaderboardWeek: "Ð›Ð¸Ð´ÐµÑ€Ð±Ð¾Ñ€Ð´ Ð·Ð° Ð½ÐµÐ´ÐµÐ»ÑŽ",
        leaderboardReferrals: "Ð¢Ð¾Ð¿ Ñ€ÐµÑ„ÐµÑ€Ð°Ð»Ð¾Ð²",
        
        // Buttons
        donate: "ÐŸÐ¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ",
        inviteFriend: "ÐŸÑ€Ð¸Ð²ÐµÐ´Ð¸ Ð´Ñ€ÑƒÐ³Ð°",
        createPayment: "Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð¿Ð»Ð°Ñ‚ÐµÐ¶",
        close: "Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ",
        
        // Donate modal
        donateTitle: "ÐŸÐ¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ Ð´Ð¾Ð½Ð°Ñ‚",
        preset1: "1 Ð¼ÐµÑÑ‚Ð¾",
        preset2: "2 Ð¼ÐµÑÑ‚Ð¾",
        preset3: "3 Ð¼ÐµÑÑ‚Ð¾",
        customAmount: "Ð¡Ð²Ð¾Ñ ÑÑƒÐ¼Ð¼Ð° (Stars):",
        enterAmount: "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÑÑƒÐ¼Ð¼Ñƒ",
        paymentMethod: "Ð¡Ð¿Ð¾ÑÐ¾Ð± Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹:",
        telegramStars: "Telegram Stars",
        crypto: "ÐšÑ€Ð¸Ð¿Ñ‚Ð¾Ð²Ð°Ð»ÑŽÑ‚Ð°",
        selectCrypto: "Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð²Ð°Ð»ÑŽÑ‚Ñƒ:",
        
        // Messages
        loading: "Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°...",
        noData: "ÐÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ñ…",
        errorLoading: "ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸",
        you: "Ð’Ñ‹",
        position: "ÐŸÐ¾Ð·Ð¸Ñ†Ð¸Ñ",
        
        // Referrals
        referralsCount: "Ñ€ÐµÑ„.",
        
        // Errors
        initError: "ÐžÑˆÐ¸Ð±ÐºÐ° Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸",
        paymentError: "ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ð¿Ð»Ð°Ñ‚ÐµÐ¶Ð°",
        userDataError: "Ð”Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹. ÐŸÐ¾Ð´Ð¾Ð¶Ð´Ð¸Ñ‚Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸...",
        linkCopied: "âœ… Ð¡ÑÑ‹Ð»ÐºÐ° ÑÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð° Ð² Ð±ÑƒÑ„ÐµÑ€ Ð¾Ð±Ð¼ÐµÐ½Ð°!\n\nÐŸÐ¾Ð´ÐµÐ»Ð¸Ñ‚ÐµÑÑŒ ÐµÑŽ Ñ Ð´Ñ€ÑƒÐ·ÑŒÑÐ¼Ð¸ Ñ‡ÐµÑ€ÐµÐ· Ð»ÑŽÐ±Ð¾Ð¹ Ð¼ÐµÑÑÐµÐ½Ð´Ð¶ÐµÑ€.",
        shareLink: "Ð ÐµÑ„ÐµÑ€Ð°Ð»ÑŒÐ½Ð°Ñ ÑÑÑ‹Ð»ÐºÐ°:\n\n{link}\n\nÐ¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ð¸ Ð¿Ð¾Ð´ÐµÐ»Ð¸Ñ‚ÐµÑÑŒ Ñ Ð´Ñ€ÑƒÐ·ÑŒÑÐ¼Ð¸.",
        
        // Payment
        paymentCreated: "Ð¡Ð¾Ð·Ð´Ð°Ð½ Ð¿Ð»Ð°Ñ‚ÐµÐ¶ Ð½Ð° {amount} Stars",
        paymentSuccess: "âœ… ÐŸÐ»Ð°Ñ‚ÐµÐ¶ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð½!",
        paymentFailed: "âŒ ÐŸÐ»Ð°Ñ‚ÐµÐ¶ Ð½Ðµ Ð¿Ñ€Ð¾ÑˆÐµÐ». ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ ÐµÑ‰Ðµ Ñ€Ð°Ð·.",
        paymentErrorMsg: "âŒ ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ð¿Ð»Ð°Ñ‚ÐµÐ¶Ð°: {error}\n\nÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ð¿Ð¾Ð·Ð¶Ðµ.",
        cryptoProviderError: "âŒ ÐšÑ€Ð¸Ð¿Ñ‚Ð¾Ð¿Ð»Ð°Ñ‚ÐµÐ¶Ð¸ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾ Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹.\n\nÐ˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Telegram Stars Ð´Ð»Ñ Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹.",
        
        // Share
        shareText: "ðŸŽ® ÐŸÑ€Ð¸ÑÐ¾ÐµÐ´Ð¸Ð½ÑÐ¹ÑÑ Ðº Ð»Ð¸Ð´ÐµÑ€Ð±Ð¾Ñ€Ð´Ñƒ Ð´Ð¾Ð½Ð°Ñ‚Ð¾Ð²!\n\n{link}",
        
        // Profile
        profileTitle: "ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð¿Ñ€Ð¾Ñ„Ð¸Ð»Ñ",
        customTextLabel: "Ð’Ð°Ñˆ Ñ‚ÐµÐºÑÑ‚ Ð² Ð»Ð¸Ð´ÐµÑ€Ð±Ð¾Ñ€Ð´Ðµ:",
        customTextPlaceholder: "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ñ‚ÐµÐºÑÑ‚ (Ð¼Ð°ÐºÑ. 100 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²)",
        saveText: "Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ",
        customTextInfo: "Ð­Ñ‚Ð¾Ñ‚ Ñ‚ÐµÐºÑÑ‚ Ð±ÑƒÐ´ÐµÑ‚ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶Ð°Ñ‚ÑŒÑÑ Ñ€ÑÐ´Ð¾Ð¼ Ñ Ð²Ð°ÑˆÐ¸Ð¼ Ð¸Ð¼ÐµÐ½ÐµÐ¼ Ð² Ð»Ð¸Ð´ÐµÑ€Ð±Ð¾Ñ€Ð´Ðµ.",
        customTextSaved: "âœ… Ð¢ÐµÐºÑÑ‚ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½!",
        customTextError: "âŒ ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ. ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ð¿Ð¾Ð·Ð¶Ðµ."
    },
    en: {
        // Tabs
        tabAllTime: "All Time",
        tabWeek: "This Week",
        tabReferrals: "Top Referrals",
        tabProfile: "Profile",
        
        // Leaderboards
        leaderboardAllTime: "All Time Leaderboard",
        leaderboardWeek: "Weekly Leaderboard",
        leaderboardReferrals: "Top Referrals",
        
        // Buttons
        donate: "Top Up",
        inviteFriend: "Invite Friend",
        createPayment: "Create Payment",
        close: "Close",
        
        // Donate modal
        donateTitle: "Top Up Donation",
        preset1: "1st Place",
        preset2: "2nd Place",
        preset3: "3rd Place",
        customAmount: "Custom Amount (Stars):",
        enterAmount: "Enter amount",
        paymentMethod: "Payment Method:",
        telegramStars: "Telegram Stars",
        crypto: "Cryptocurrency",
        selectCrypto: "Select currency:",
        
        // Messages
        loading: "Loading...",
        noData: "No data",
        errorLoading: "Error loading",
        you: "You",
        position: "Position",
        
        // Referrals
        referralsCount: "ref.",
        
        // Errors
        initError: "Initialization error",
        paymentError: "Payment creation error",
        userDataError: "User data not found. Please wait for loading...",
        linkCopied: "âœ… Link copied to clipboard!\n\nShare it with your friends via any messenger.",
        shareLink: "Referral link:\n\n{link}\n\nCopy and share with friends.",
        
        // Payment
        paymentCreated: "Payment created for {amount} Stars",
        paymentSuccess: "âœ… Payment processed successfully!",
        paymentFailed: "âŒ Payment failed. Please try again.",
        paymentErrorMsg: "âŒ Payment creation error: {error}\n\nPlease try later.",
        cryptoProviderError: "âŒ Cryptocurrency payments are temporarily unavailable.\n\nPlease use Telegram Stars for payment.",
        
        // Share
        shareText: "ðŸŽ® Join the donation leaderboard!\n\n{link}",
        
        // Profile
        profileTitle: "Profile Settings",
        customTextLabel: "Your text in leaderboard:",
        customTextPlaceholder: "Enter text (max 100 characters)",
        saveText: "Save",
        customTextInfo: "This text will be displayed next to your name in the leaderboard.",
        customTextSaved: "âœ… Text saved!",
        customTextError: "âŒ Error saving. Please try later."
    }
};

// Get current language
function getLanguage() {
    // Try to get from Telegram Web App
    if (window.Telegram && window.Telegram.WebApp) {
        const tg = window.Telegram.WebApp;
        const lang = tg.initDataUnsafe?.user?.language_code;
        if (lang) {
            // If language is Russian, return 'ru', otherwise 'en'
            return lang.startsWith('ru') ? 'ru' : 'en';
        }
    }
    
    // Fallback: check browser language
    const browserLang = navigator.language || navigator.userLanguage;
    return browserLang.startsWith('ru') ? 'ru' : 'en';
}

// Translation function
function t(key, params = {}) {
    const lang = getLanguage();
    const translation = translations[lang]?.[key] || translations.en[key] || key;
    
    // Replace placeholders
    if (params && Object.keys(params).length > 0) {
        return translation.replace(/\{(\w+)\}/g, (match, paramKey) => {
            return params[paramKey] !== undefined ? params[paramKey] : match;
        });
    }
    
    return translation;
}

// Set language attribute on html element
function setLanguage() {
    const lang = getLanguage();
    document.documentElement.lang = lang;
}

